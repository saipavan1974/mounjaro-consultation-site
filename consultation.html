<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consultation Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
</head>

<body class="bg-gray-50">
  <div x-data="{ step: 1 }" class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Online Consultation</h1>
    <form name="consultation" method="POST" data-netlify="true">

      <!-- Step 1: Consultation -->
      <div x-show="step === 1">
        <h2 class="text-xl font-semibold mb-4">Step 1: Medical Consultation</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input type="text" name="first_name" placeholder="First Name" required class="border p-2 rounded">
          <input type="text" name="last_name" placeholder="Last Name" required class="border p-2 rounded">
          <input type="email" name="email" placeholder="Email" required class="border p-2 rounded">
          <input type="date" name="dob" placeholder="Date of Birth" required class="border p-2 rounded">

          <input type="number" name="weight" placeholder="Weight (kg)" required class="border p-2 rounded" id="weight" oninput="calculateBMI()">
          <input type="number" name="height" placeholder="Height (cm)" required class="border p-2 rounded" id="height" oninput="calculateBMI()">

          <input type="text" name="bmi" placeholder="BMI" readonly class="border p-2 rounded bg-gray-100" id="bmi">

          <textarea name="existing_conditions" placeholder="Do you have any existing medical conditions?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="current_medications" placeholder="Are you currently taking any medications?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="allergies" placeholder="Do you have any allergies to medication or other substances?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="smoking_status" placeholder="Do you smoke or use any tobacco products?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="alcohol_use" placeholder="How often do you consume alcohol?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="medical_history" placeholder="Have you had any surgeries or hospitalizations in the past?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="pregnancy" placeholder="(For female patients) Are you currently pregnant or breastfeeding?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="mounjaro_use_reason" placeholder="What is your reason for wanting to use Mounjaro?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="previous_weight_loss_attempts" placeholder="Have you tried any other weight loss methods or medications in the past?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="side_effects_concerns" placeholder="Do you have any concerns about possible side effects?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="expectations" placeholder="What are your expectations from this treatment?" required class="border p-2 rounded col-span-2"></textarea>

          <textarea name="additional_comments" placeholder="Any other relevant information you’d like to share with us?" class="border p-2 rounded col-span-2"></textarea>
        </div>

        <div class="mt-6 text-right">
          <button type="button" @click="step++" class="bg-blue-600 text-white px-4 py-2 rounded">Next</button>
        </div>
      </div>
      
      <!-- Step 2: Billing & Shipping -->
      <div x-show="step === 2">
        <h2 class="text-2xl font-bold mb-4">Step 2: Billing & Shipping</h2>

        <label class="block mb-2">
          Email:
          <input type="email" name="email" required class="w-full border p-2 rounded" />
        </label>

        <label class="block mb-2">
          Phone Number (+44):
          <input type="tel" name="phone" required pattern="\+44\d{10}" placeholder="+441234567890"
            class="w-full border p-2 rounded" />
        </label>

        <label class="block mb-2">
          Address:
          <input type="text" name="address" required class="w-full border p-2 rounded" />
        </label>

        <label class="block mb-2">
          City:
          <input type="text" name="city" required class="w-full border p-2 rounded" />
        </label>

        <label class="block mb-4">
          Postcode:
          <input type="text" name="postcode" required class="w-full border p-2 rounded" />
        </label>

        <div class="flex justify-between">
          <button type="button" @click="step = 1"
            class="bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600">Back</button>
          <button type="button" @click="step = 3"
            class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">Next</button>
        </div>
      </div>

      <!-- Step 3: Review & Consent -->
      <div x-show="step === 3">
        <h2 class="text-2xl font-bold mb-4">Step 3: Consent & Submit</h2>
         <fieldset class="mb-6">
          <legend class="font-semibold mb-2">General Consent</legend>
          <label class="block mb-2">
            <input type="checkbox" name="consent_general" required>
            I am aware of the patient website Terms & Conditions and I have agreed to continue.
          </label>
          <label class="block mb-2">
            <input type="checkbox" name="consent_medicine" required>
            I have received information on the risks and benefits of the medicine, and I have had the opportunity to ask questions. The medical information I have provided is true and accurate to the best of my knowledge, and I consent to the medicine being administered.
          </label>
        </fieldset>

        <fieldset class="mb-6">
          <legend class="font-semibold mb-2">Data Protection & Record</legend>
          <label class="block mb-2">
            <input type="checkbox" name="consent_data_storage" required>
            I understand that my personal information will be securely uploaded to the website’s Database and kept in line with data protection regulations.
          </label>
          <label class="block mb-2">
            <input type="checkbox" name="consent_data_use" required>
            I authorize the collection, storage, and secure transmission of my information for the purposes mentioned above.
          </label>
          <label class="block mb-2">
            <input type="checkbox" name="consent_account" required>
            I acknowledge that after the consultation, the details of my medication and consultations will be accessible through my Online account.
          </label>
          <label class="block mb-2">
            <input type="checkbox" name="consent_staff_contact" required>
            I understand I can speak to staff about any queries regarding the consultation or my data rights.
          </label>
        </fieldset>

        <fieldset class="mb-6">
          <legend class="font-semibold mb-2">Medication Use</legend>
          <label class="block mb-2">
            <input type="checkbox" name="consent_side_effects" required>
            The intended user will stop using this medicine and seek medical attention if unusual side effects occur.
          </label>
          <label class="block mb-2">
            <input type="checkbox" name="consent_user_only" required>
            The medicine is solely for use by the intended user.
          </label>
          <label class="block mb-4">
            <input type="checkbox" name="consent_leaflet" required>
            The intended user will read the patient information leaflet supplied with this medication.
          </label>
        </fieldset>

        <fieldset class="mb-6">
          <legend class="font-semibold mb-2">Age & Terms</legend>
          <label class="block mb-2">
            <input type="checkbox" name="consent_18" required>
            I am over 18 and I agree to the Terms and Conditions
          </label>
        </fieldset>

        <div class="flex justify-between">
          <button type="button" @click="step = 2"
            class="bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600">Back</button>
          <button type="submit"
            class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700">Submit & Pay</button>
        </div>
      </div>
    </form>
  </main>

  <footer class="bg-white border-t mt-10">
    <div class="container mx-auto px-4 py-6 text-center text-sm text-gray-500">
      &copy; 2025 PharmaLogic. All rights reserved.
    </div>
  </footer>
</body>

</html>
